<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Will You Be My Valentine?</title>
  <style>
    * { box-sizing: border-box; font-family: "Poppins", sans-serif; }
    body {
      margin: 0;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4);
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      color: #2d2d2d;
    }

    .card {
      background: white;
      padding: 2.5rem 2rem;
      border-radius: 24px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
      text-align: center;
      max-width: 420px;
      width: 90%;
      position: relative;
    }

    h1 {
      font-size: 1.8rem;
      margin-bottom: 1rem;
    }

    p {
      font-size: 1rem;
      margin-bottom: 2rem;
      color: #555;
    }

    .buttons {
      display: flex;
      justify-content: center;
      gap: 1rem;
      position: relative;
    }

    button {
      padding: 0.7rem 1.4rem;
      border-radius: 999px;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      transition: transform 0.2s ease, background 0.2s ease;
    }

    #yesBtn {
      background: #ff4d6d;
      color: white;
      font-weight: 600;
    }

    #yesBtn:hover { transform: scale(1.1); }

    #noBtn {
      background: #f1f1f1;
      color: #333;
      position: absolute;
    }

    .hearts span {
      position: absolute;
      font-size: 1.2rem;
      animation: floatUp 6s linear infinite;
      opacity: 0.8;
    }

    @keyframes floatUp {
      0% { transform: translateY(0) scale(1); opacity: 0.8; }
      100% { transform: translateY(-100vh) scale(1.5); opacity: 0; }
    }
  </style>
</head>
<body>

  <div class="hearts"></div>

  <div class="card" id="card">
    <h1>Will you be my Valentine? ðŸ’–</h1>
    <p>Ritik officially asking you in the cutest way possible.</p>
    <div class="buttons">
      <button id="yesBtn">Yes ðŸ’•</button>
      <button id="noBtn">No ðŸ˜¤</button>
    </div>
  </div>

  <!-- Local audio file -->
  <audio id="song" src="fire_and_desire.mp3"></audio>

  <script>
    function launchFloatingPhotos() {
      const photoUrls = [
        "photos/pic1.jpg",
        "photos/pic2.jpg",
        "photos/pic3.jpg",
        "photos/pic4.jpg",
        "photos/pic5.jpg",
        "photos/pic6.jpg",
        "photos/pic7.jpg",
        "photos/pic8.jpg",
        "photos/pic9.jpg",
        "photos/pic10.jpg"
      ];

      const cardRect = card.getBoundingClientRect();

      function createPhoto() {
        const img = document.createElement("img");
        img.src = photoUrls[Math.floor(Math.random() * photoUrls.length)];
        img.style.position = "absolute";

        // Random width between 100-180px (no more tiny images)
        const imgWidth = Math.random() * 80 + 100; 
        img.style.width = imgWidth + "px";

        const imgHeight = imgWidth * 0.75; // approximate height
        img.style.height = "auto";
        img.style.opacity = 0;
        img.style.transition = "opacity 0.5s";

        // Random position avoiding card and staying in viewport
        const cardRect = card.getBoundingClientRect();
        const maxX = window.innerWidth - imgWidth;
        const maxY = window.innerHeight - imgHeight;

        let x, y;
        let safe = false;

        while (!safe) {
          x = Math.random() * maxX;
          y = Math.random() * maxY;

          if (
            x + imgWidth < cardRect.left || 
            x > cardRect.right || 
            y + imgHeight < cardRect.top || 
            y > cardRect.bottom
          ) {
            safe = true;
          }
        }

        img.style.left = x + "px";
        img.style.top = y + "px";

        document.body.appendChild(img);

        // Fade in
        requestAnimationFrame(() => img.style.opacity = 1);

        // Remove after 2-5s
        setTimeout(() => {
          img.style.opacity = 0;
          setTimeout(() => img.remove(), 500);
        }, 2000 + Math.random() * 3000);
      }


      // Create a new photo every 500ms
      setInterval(createPhoto, 750);
    }

    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");
    const card = document.getElementById("card");
    const hearts = document.querySelector(".hearts");
    const audio = document.getElementById("song");

    // No button runs away
    noBtn.addEventListener("mouseover", () => {
      const x = Math.random() * 200 - 100;
      const y = Math.random() * 200 - 100;
      noBtn.style.transform = `translate(${x}px, ${y}px)`;
    });

    // If she somehow clicks No
    noBtn.addEventListener("click", () => {
      noBtn.remove();
      alert('Nice try ðŸ˜ You are stuck with me now.');
    });

    // Yes button
    yesBtn.addEventListener("click", () => {
      card.innerHTML = `
        
      `;
      launchHearts();
      playAudio();
      launchFloatingPhotos(); // âœ… Start floating photos
      showMessages(); // âœ… Start showing messages
    });

    function launchHearts() {
      // Initial burst
      for (let i = 0; i < 50; i++) {
        createHeart();
      }

      // Continuous hearts
      setInterval(() => {
        createHeart();
      }, 200);

      function createHeart() {
        const heart = document.createElement("span");
        heart.innerText = "â¤ï¸";
        heart.style.left = Math.random() * 100 + "vw";
        heart.style.animationDuration = 2 + Math.random() * 2 + "s";
        hearts.appendChild(heart);
        setTimeout(() => heart.remove(), 6000);
      }
    }

    function playAudio() {
      audio.currentTime = 122; // 2:02 in seconds
      audio.volume = 0;
      audio.play();

      const fadeInDuration = 2000; // 2 seconds
      const fadeOutDuration = 2000; // 2 seconds before stopping
      const stopTime = 150; // 2:30 in seconds

      // Fade-in
      const fadeInStep = 50 / fadeInDuration;
      let vol = 0;
      const fadeInInterval = setInterval(() => {
        vol += fadeInStep;
        audio.volume = Math.min(vol, 1);
        if (vol >= 1) clearInterval(fadeInInterval);
      }, 50);

      // Check when to start fade-out and stop
      const checkInterval = setInterval(() => {
        const timeLeft = stopTime - audio.currentTime;

        if (timeLeft <= fadeOutDuration / 1000) {
          const fadeOutStep = 50 / fadeOutDuration;
          const fadeOutInterval = setInterval(() => {
            audio.volume = Math.max(audio.volume - fadeOutStep, 0);
            if (audio.volume <= 0) {
              audio.pause();
              clearInterval(fadeOutInterval);

              // Redirect to your YouTube link
              window.location.href = "https://youtu.be/mANvg9R1xeI?list=RDmANvg9R1xeI&t=20";
            }
          }, 50);
          clearInterval(checkInterval);
        }
      }, 100);
    }


    const messages = [
      "Remember our first date?",
      "You make me so happy",
      "I love your smile my love ðŸ˜Š",
      "Forever yours ðŸ˜œ",
      "Thank you for being mine",
      "Every day with you is amazing",
      "Canâ€™t wait to make more memories",
      "Youâ€™re my everything",
      "Happy Valentineâ€™s Day â¤ï¸"
    ];


    function showMessages() {
      let i = 0;
      const msgContainer = document.createElement("div");
      msgContainer.style.position = "absolute";
      msgContainer.style.top = "50%";
      msgContainer.style.left = "50%";
      msgContainer.style.transform = "translate(-50%, -50%)";
      msgContainer.style.textAlign = "center";
      msgContainer.style.fontSize = "1.5rem";
      msgContainer.style.color = "#ff4d6d";
      msgContainer.style.pointerEvents = "none"; // clicks go through
      document.body.appendChild(msgContainer);

      const interval = setInterval(() => {
        if (i >= messages.length) {
          clearInterval(interval);
          return;
        }

        msgContainer.innerText = messages[i];
        msgContainer.style.opacity = 0;
        msgContainer.style.transition = "opacity 0.5s";
        requestAnimationFrame(() => msgContainer.style.opacity = 1);

        // Fade out after 2 seconds
        setTimeout(() => {
          msgContainer.style.opacity = 0;
        }, 2000);

        i++;
      }, 2500); // show next message every 2.5s
    }

  </script>

</body>
</html>
